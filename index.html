<html>
  <head>
    <script src="https://aframe.io/releases/1.0.4/aframe.min.js"></script>
    <script src="https://unpkg.com/aframe-environment-component/dist/aframe-environment-component.min.js"></script>
  </head>
  <body>
    <script>
      AFRAME.registerComponent('scale-on-mouseenter', {
        schema: {
          to: {default: '2 2 2', type: 'vec3'}
        },
    
        init: () => {
          let data = this.data;
          let el = this.el;
          this.el.addEventListener('mouseenter', () => {
            el.object3D.scale.copy(data.to);
          });
        }
      });

      AFRAME.registerComponent('cursor-listener', {
        init: () => {
          let el = this.el;
          let lastIndex = -1;
          let COLORS = ['red', 'green', 'blue'];
          this.el.addEventListener('click', (evt) => {
            lastIndex = (lastIndex + 1) % COLORS.length;
            el.object3D.material.color(COLORS[lastIndex]);
            console.log('I was clicked at: ', evt.detail.intersection.point);
          });
        }
      });
    </script>
    <!-- Sets the base scene for every 3D world/layout -->
    <a-scene fog="type: linear; color: #AAA">
      <a-assets>
        <img id="woodTexture" src="./assets/img/wood.jpg" />
        <img id="skyTexture" src="./assets/img/sky.jpg" />
        <audio src="./assets/sounds/background-music.mp3" autoplay preload></audio>
      </a-assets>
      <a-box
        height="3"
        rotation="0 60 45"
        src="#woodTexture"
        position="0 3 -17"
        animation__position="property: object3D.position.y; to: 2.2; dir: alternate; dur: 2000; loop: true"
        animation__mouseenter="property: scale; to: 3 3 3; dur: 300; startEvents: mouseenter"
        animation__mouseleave="property: scale; to: 2 2 2; dur: 300; startEvents: mouseleave"
      >
      </a-box>
      <a-entity
        text="value: Hover over the log to get started; color: #BBB"
        position="-1 3 -3"
        scale="3 3 3"></a-entity>
      <a-box position="2 4 -5" cursor-listener material="color: blue"></a-box>
      <a-entity environment="preset: goaland; dressingAmount: 750"></a-entity>
      <a-camera look-controls>
        <a-entity cursor="fuse: true; fuseTimeout: 500"
                  position="0 0 -1"
                  geometry="primitive: ring; radiusInner: 0.01; radiusOuter: 0.03"
                  material="color: black; shader: flat">
        </a-entity>
      </a-camera>
    </a-scene>
  </body>
</html>